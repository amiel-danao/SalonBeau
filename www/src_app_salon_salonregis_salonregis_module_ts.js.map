{"version":3,"file":"src_app_salon_salonregis_salonregis_module_ts.js","mappings":";;;;;;;;;;;;;;;;AACuD;AAEJ;;;AAEnD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4DAAc;KAC1B;CACF,CAAC;AAMK,MAAM,2BAA2B;;sGAA3B,2BAA2B;wHAA3B,2BAA2B;4HAH5B,kEAAqB,CAAC,MAAM,CAAC,EAC7B,yDAAY;mIAEX,2BAA2B,oFAF5B,yDAAY;;;;;;;;;;;;;;;;;;;;;ACbuB;AACF;AAEA;AAE6B;AAEvB;;AAW5C,MAAM,oBAAoB;;wFAApB,oBAAoB;iHAApB,oBAAoB;qHAP7B,yDAAY;QACZ,uDAAW;QACX,uDAAW;QACX,mFAA2B;mIAIlB,oBAAoB,mBAFhB,4DAAc,aAL3B,yDAAY;QACZ,uDAAW;QACX,uDAAW;QACX,mFAA2B;;;;;;;;;;;;;;;;;;;;;;;ACLE;AAMF;;;;;;;AAUxB,MAAM,cAAc;IAgBzB,YACU,SAAoB,EACpB,OAAgB,EAChB,KAAsB,EACtB,MAAc,EACd,cAA8B;QAJ9B,cAAS,GAAT,SAAS,CAAW;QACpB,YAAO,GAAP,OAAO,CAAS;QAChB,UAAK,GAAL,KAAK,CAAiB;QACtB,WAAM,GAAN,MAAM,CAAQ;QACd,mBAAc,GAAd,cAAc,CAAgB;QApBjC,kBAAa,GAAW,EAAE,CAAC;QAC3B,UAAK,GAAW,EAAE,CAAC;QACnB,YAAO,GAAW,EAAE,CAAC;QACrB,kBAAa,GAAW,EAAE,CAAC;QAC3B,cAAS,GAAW,EAAE,CAAC;QACvB,yBAAoB,GAAW,EAAE,CAAC;QAGzC,oBAAe,GAAe,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QAC1D,gBAAW,GAAY,IAAI,CAAC;QAI5B,aAAQ,GAAe,EAAE,CAAC;QASxB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACrD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACxB,CAAC;IAED,QAAQ;QACN,IAAI,IAAI,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;IACH,CAAC;IAED,WAAW;QACT,MAAM,OAAO,GAAG,mEAAU,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;QACvD,MAAM,cAAc,GAAG,8DAAK,CAAC,OAAO,EAAE,8DAAK,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAEpE,gEAAO,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACnC,IAAI,CAAC,QAAQ,GAAG;gBACd,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAQ,EAAE,EAAE;oBAC3B,uCAAY,GAAG,CAAC,IAAI,EAAE,KAAE,EAAE,EAAE,GAAG,CAAC,EAAE,IAAG;gBACvC,CAAC,CAAC;aACH,CAAC;YAEF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YACpC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IACD,UAAU,CAAC,KAAU;QACnB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;YAC7D,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;SACjC;aAAM;YACL,IAAI,CAAC,YAAY,CAAC,0BAA0B,CAAC,CAAC;YAC9C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC1B;IACH,CAAC;IACK,YAAY,CAAC,OAAe;;YAChC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YAEH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;KAAA;IAED,UAAU,CAAC,KAAU;QACnB,IACE,IAAI,CAAC,aAAa,IAAI,EAAE;YACxB,IAAI,CAAC,oBAAoB,IAAI,EAAE;YAC/B,IAAI,CAAC,KAAK,IAAI,EAAE;YAChB,IAAI,CAAC,SAAS,IAAI,EAAE;YACpB,IAAI,CAAC,KAAK,IAAI,EAAE,EAChB;YACA,IAAI,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;YAChD,OAAO;SACR;QACD,MAAM,UAAU,GAAG,0DAAG,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QACjE,MAAM,MAAM,GAAG,2EAAoB,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAE3D,MAAM,CAAC,EAAE,CACP,eAAe,EACf,CAAC,QAAQ,EAAE,EAAE;YACX,MAAM,QAAQ,GACZ,CAAC,QAAQ,CAAC,gBAAgB,GAAG,QAAQ,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC;YAC1D,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAEtB,IAAI,QAAQ,KAAK,GAAG,EAAE;gBACpB,UAAU,CAAC,GAAG,EAAE;oBACd,qEAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;wBAC/C,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;oBAC/C,CAAC,CAAC,CAAC;gBACL,CAAC,EAAE,IAAI,CAAC,CAAC;aACV;QACH,CAAC,EACD,GAAG,EAAE;YACH,qEAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBAC/C,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;QACL,CAAC,CACF,CAAC;IACJ,CAAC;IAED,QAAQ,CAAC,GAAQ,EAAE,IAAS;QAC1B,IAAI,IAAI,GAAG;YACT,oBAAoB,EAAE,IAAI,CAAC,oBAAoB;YAC/C,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,OAAO,EAAE,GAAG;YACZ,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,SAAS,EAAE,IAAI,CAAC,SAAS;YAEzB,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,OAAO,EAAE,EAAE;SACZ,CAAC;QAEF,MAAM,QAAQ,GAAG,mEAAU,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAErD,+DAAM,CAAC,QAAQ,EAAE,IAAI,CAAC;aACnB,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACZ,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAE1C,MAAM,kBAAkB,GAAG,4DAAG,CAC5B,IAAI,CAAC,SAAS,EACd,UAAU,EACV,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CACpB,CAAC;YAEF,IAAI,QAAQ,GAAG;gBACb,IAAI,EAAE,OAAO;aACd,CAAC;YACF,kEAAS,CAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBACnD,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;gBAEtC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,cAAc,GAAG,GAAG,CAAC,CAAC,CAAC;YAC/C,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;YACb,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IACP,CAAC;;4EAhJU,cAAc;4GAAd,cAAc;;QC1B3B,6EAAY;QAGN,6EAAmC;QACrC,4DAAc;QACd,4EAAW;QAAA,2EAAgB;QAAA,4DAAY;QAI3C,8EAAa;QAET,oEAA0B;QAC5B,4DAAM;QACN,yEAA2C;QAEU,sEAAU;QAAA,4DAAY;QACvE,gFAKC;QAJC,0LAAuB;QAIxB,4DAAY;QAGf,+EAAuB;QAC4B,mEAAO;QAAA,4DAAY;QACpE,gFAKC;QAJC,8LAA2B;QAI5B,4DAAY;QAGf,+EAAuB;QAC4B,yEAAa;QAAA,4DAAY;QAC1E,gFAKC;QAJC,8LAA2B;QAI5B,4DAAY;QAEf,+EAAuB;QAC4B,iEAAK;QAAA,4DAAY;QAClE,gFAKC;QAJC,sLAAmB;QAIpB,4DAAY;QAGf,+EAAuB;QAElB,iFAAqB;QAAA,4DACvB;QACD,gFAKC;QAJC,qMAAkC;QAInC,4DAAY;QAEf,+EAAuB;QACQ,wFAA4B;QAAA,4DAAY;QACrE,iFAME;QAFA,8IAAU,sBAAkB,IAAC;QAJ/B,4DAME;QACF,kFAAqC;QAAzB,wRAAS,qEAAc,KAAC;QAAC,uEAAW;QAAA,4DAAa;QAG/D,iEAAM;QAMN,gFAAuB;QACrB,+EAA0C;QAC1C,iFAAwB;QAAA,+FAAmC;QAAA,4DAAY;QAGzE,sEAA8B;QAC9B,8EAAqD;QAA7B,6IAAS,sBAAkB,IAAC;QAClD,iFACF;QAAA,4DAAS;;QAzEL,2DAAuB;QAAvB,kFAAuB;QAUvB,0DAA2B;QAA3B,sFAA2B;QAU3B,0DAA2B;QAA3B,sFAA2B;QAS3B,0DAAmB;QAAnB,8EAAmB;QAYnB,0DAAkC;QAAlC,6FAAkC","sources":["./src/app/salon/salonregis/salonregis-routing.module.ts","./src/app/salon/salonregis/salonregis.module.ts","./src/app/salon/salonregis/salonregis.page.ts","./src/app/salon/salonregis/salonregis.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SalonregisPage } from './salonregis.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SalonregisPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SalonregisPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SalonregisPageRoutingModule } from './salonregis-routing.module';\n\nimport { SalonregisPage } from './salonregis.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SalonregisPageRoutingModule,\n  ],\n  declarations: [SalonregisPage],\n})\nexport class SalonregisPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  addDoc,\n  collection,\n  doc,\n  Firestore,\n  getDocs,\n  query,\n  updateDoc,\n  where,\n} from '@angular/fire/firestore';\nimport {\n  getDownloadURL,\n  ref,\n  Storage,\n  uploadBytesResumable,\n} from '@angular/fire/storage';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastController } from '@ionic/angular';\nimport { getDoc } from 'firebase/firestore';\n\n@Component({\n  selector: 'app-salonregis',\n  templateUrl: './salonregis.page.html',\n  styleUrls: ['./salonregis.page.scss'],\n})\nexport class SalonregisPage implements OnInit {\n  public contactNumber: string = '';\n  public email: string = '';\n  public logoUrl: string = '';\n  public salonLocation: string = '';\n  public salonName: string = '';\n  public businessRegistration: string = '';\n\n  file!: File;\n  fileRestriction: Array<any> = ['image/jpeg', 'image/png'];\n  isFileValid: boolean = true;\n\n  uid: any;\n\n  userData: Array<any> = [];\n\n  constructor(\n    private firestore: Firestore,\n    private storage: Storage,\n    private toast: ToastController,\n    private router: Router,\n    private activatedRoute: ActivatedRoute\n  ) {\n    this.uid = this.activatedRoute.snapshot.params['id'];\n    console.log(this.uid);\n  }\n\n  ngOnInit() {\n    if (this.uid) {\n      this.getUserData();\n    }\n  }\n\n  getUserData() {\n    const usersDb = collection(this.firestore, 'customer');\n    const customerSingle = query(usersDb, where('uid', '==', this.uid));\n\n    getDocs(customerSingle).then((res) => {\n      this.userData = [\n        ...res.docs.map((doc: any) => {\n          return { ...doc.data(), id: doc.id };\n        }),\n      ];\n\n      this.email = this.userData[0].email;\n      console.log(this.userData);\n    });\n  }\n  fileChange(event: any) {\n    console.log(event.target.files[0]);\n    if (this.fileRestriction.includes(event.target.files[0].type)) {\n      this.file = event.target.files[0];\n      this.isFileValid = true;\n      this.presentToast('Logo added');\n    } else {\n      this.presentToast('Please put a valid logo ');\n      this.file = null;\n      this.isFileValid = false;\n    }\n  }\n  async presentToast(message: string) {\n    const toast = await this.toast.create({\n      message: message,\n      duration: 2000,\n    });\n\n    toast.present();\n  }\n\n  uploadFile(event: any) {\n    if (\n      this.contactNumber == '' &&\n      this.businessRegistration == '' &&\n      this.email == '' &&\n      this.salonName == '' &&\n      this.email == ''\n    ) {\n      this.presentToast('Please fill up the fields ');\n      return;\n    }\n    const storageRef = ref(this.storage, `images/${this.file.name}`);\n    const upload = uploadBytesResumable(storageRef, this.file);\n\n    upload.on(\n      'state_changed',\n      (snapshot) => {\n        const progress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log(progress);\n\n        if (progress === 100) {\n          setTimeout(() => {\n            getDownloadURL(upload.snapshot.ref).then((url) => {\n              this.addSalon(url, upload.snapshot.metadata);\n            });\n          }, 2000);\n        }\n      },\n      () => {\n        getDownloadURL(upload.snapshot.ref).then((url) => {\n          console.log('dlurl', url);\n        });\n      }\n    );\n  }\n\n  addSalon(url: any, meta: any): void {\n    let data = {\n      businessRegistration: this.businessRegistration,\n      contactNumber: this.contactNumber,\n      email: this.email,\n      logoUrl: url,\n      salonLocation: this.salonLocation,\n      salonName: this.salonName,\n\n      uid: this.uid,\n      ratings: [],\n    };\n\n    const addSalon = collection(this.firestore, 'salon');\n\n    addDoc(addSalon, data)\n      .then((res) => {\n        const key = res['_key'].path.segments[1];\n        console.log(res['_key'].path.segments[1]);\n\n        const updateCustomerType = doc(\n          this.firestore,\n          'customer',\n          this.userData[0].id\n        );\n\n        let typeData = {\n          type: 'salon',\n        };\n        updateDoc(updateCustomerType, typeData).then((res) => {\n          this.presentToast('Salon Registered');\n\n          this.router.navigate(['/saloninter/' + key]);\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n}\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Sign up as Salon</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<!-- Application Form -->\r\n<ion-content>\r\n  <div>\r\n    <img src=\"assets/3.png\" />\r\n  </div>\r\n  <div class=\"salon-register-content-center\">\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\">Salon Name</ion-label>\r\n      <ion-input\r\n        [(ngModel)]=\"salonName\"\r\n        name=\"salonName\"\r\n        type=\"text\"\r\n        placeholder=\" \"\r\n      ></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\">Address</ion-label>\r\n      <ion-input\r\n        [(ngModel)]=\"salonLocation\"\r\n        name=\"salonLocation\"\r\n        type=\"text\"\r\n        placeholder=\" \"\r\n      ></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\">Mobile Number</ion-label>\r\n      <ion-input\r\n        [(ngModel)]=\"contactNumber\"\r\n        name=\"contactNumber\"\r\n        type=\"number\"\r\n        placeholder=\"\"\r\n      ></ion-input>\r\n    </ion-item>\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\">Email</ion-label>\r\n      <ion-input\r\n        [(ngModel)]=\"email\"\r\n        name=\"email\"\r\n        type=\"email\"\r\n        placeholder=\"\"\r\n      ></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\"\r\n        >Business Registration</ion-label\r\n      >\r\n      <ion-input\r\n        [(ngModel)]=\"businessRegistration\"\r\n        name=\"businessRegistration\"\r\n        type=\"text\"\r\n        placeholder=\"\"\r\n      ></ion-input>\r\n    </ion-item>\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\">Salon Logo (1 x 1 size only)</ion-label>\r\n      <input\r\n        #upload\r\n        type=\"file\"\r\n        placeholder=\"\"\r\n        (change)=\"fileChange($event)\"\r\n        hidden\r\n      />\r\n      <ion-button (click)=\"upload.click()\">Upload Logo</ion-button>\r\n    </ion-item>\r\n\r\n    <br /><br />\r\n\r\n    <!-- <div float-right class=\"my-checkbox\">\r\n      <ion-checkbox name=\"check\"></ion-checkbox>\r\n      <ion-label class=\"text\">I agree in all terms and conditions</ion-label>\r\n    </div> -->\r\n    <ion-item lines=\"none\">\r\n      <ion-checkbox name=\"check\"></ion-checkbox>\r\n      <ion-label class=\"text\">I agree in all terms and conditions</ion-label>\r\n    </ion-item>\r\n\r\n    <div class=\"spacer-h-s\"></div>\r\n    <button  class=\"submit\" (click)=\"uploadFile($event)\">\r\n      Start Your Journey!\r\n    </button>\r\n  </div>\r\n</ion-content>\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}