{"version":3,"file":"src_app_salon_salonregis_salonregis_module_ts.js","mappings":";;;;;;;;;;;;;;;;AACuD;AAEJ;;;AAEnD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4DAAc;KAC1B;CACF,CAAC;AAMK,MAAM,2BAA2B;;sGAA3B,2BAA2B;wHAA3B,2BAA2B;4HAH5B,kEAAqB,CAAC,MAAM,CAAC,EAC7B,yDAAY;mIAEX,2BAA2B,oFAF5B,yDAAY;;;;;;;;;;;;;;;;;;;;;ACbuB;AACF;AAEA;AAE6B;AAEvB;;AAW5C,MAAM,oBAAoB;;wFAApB,oBAAoB;iHAApB,oBAAoB;qHAP7B,yDAAY;QACZ,uDAAW;QACX,uDAAW;QACX,mFAA2B;mIAIlB,oBAAoB,mBAFhB,4DAAc,aAL3B,yDAAY;QACZ,uDAAW;QACX,uDAAW;QACX,mFAA2B;;;;;;;;;;;;;;;;;;;;;;;ACLE;AAMF;;;;;;;AAUxB,MAAM,cAAc;IAgBzB,YACU,SAAoB,EACpB,OAAgB,EAChB,KAAsB,EACtB,MAAc,EACd,cAA8B;QAJ9B,cAAS,GAAT,SAAS,CAAW;QACpB,YAAO,GAAP,OAAO,CAAS;QAChB,UAAK,GAAL,KAAK,CAAiB;QACtB,WAAM,GAAN,MAAM,CAAQ;QACd,mBAAc,GAAd,cAAc,CAAgB;QApBjC,kBAAa,GAAW,EAAE,CAAC;QAC3B,UAAK,GAAW,EAAE,CAAC;QACnB,YAAO,GAAW,EAAE,CAAC;QACrB,kBAAa,GAAW,EAAE,CAAC;QAC3B,cAAS,GAAW,EAAE,CAAC;QACvB,yBAAoB,GAAW,EAAE,CAAC;QAGzC,oBAAe,GAAe,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QAC1D,gBAAW,GAAY,IAAI,CAAC;QAI5B,aAAQ,GAAe,EAAE,CAAC;QASxB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACrD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACxB,CAAC;IAED,QAAQ;QACN,IAAI,IAAI,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;IACH,CAAC;IAED,WAAW;QACT,MAAM,OAAO,GAAG,mEAAU,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;QACvD,MAAM,cAAc,GAAG,8DAAK,CAAC,OAAO,EAAE,8DAAK,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAEpE,gEAAO,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACnC,IAAI,CAAC,QAAQ,GAAG;gBACd,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAQ,EAAE,EAAE;oBAC3B,uCAAY,GAAG,CAAC,IAAI,EAAE,KAAE,EAAE,EAAE,GAAG,CAAC,EAAE,IAAG;gBACvC,CAAC,CAAC;aACH,CAAC;YAEF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YACpC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IACD,UAAU,CAAC,KAAU;QACnB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;YAC7D,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;SACjC;aAAM;YACL,IAAI,CAAC,YAAY,CAAC,0BAA0B,CAAC,CAAC;YAC9C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC1B;IACH,CAAC;IACK,YAAY,CAAC,OAAe;;YAChC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YAEH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;KAAA;IAED,UAAU,CAAC,KAAU;QACnB,IACE,IAAI,CAAC,aAAa,IAAI,EAAE;YACxB,IAAI,CAAC,oBAAoB,IAAI,EAAE;YAC/B,IAAI,CAAC,KAAK,IAAI,EAAE;YAChB,IAAI,CAAC,SAAS,IAAI,EAAE;YACpB,IAAI,CAAC,KAAK,IAAI,EAAE,EAChB;YACA,IAAI,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;YAChD,OAAO;SACR;QACD,MAAM,UAAU,GAAG,0DAAG,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QACjE,MAAM,MAAM,GAAG,2EAAoB,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAE3D,MAAM,CAAC,EAAE,CACP,eAAe,EACf,CAAC,QAAQ,EAAE,EAAE;YACX,MAAM,QAAQ,GACZ,CAAC,QAAQ,CAAC,gBAAgB,GAAG,QAAQ,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC;YAC1D,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAEtB,IAAI,QAAQ,KAAK,GAAG,EAAE;gBACpB,UAAU,CAAC,GAAG,EAAE;oBACd,qEAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;wBAC/C,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;oBAC/C,CAAC,CAAC,CAAC;gBACL,CAAC,EAAE,IAAI,CAAC,CAAC;aACV;QACH,CAAC,EACD,GAAG,EAAE;YACH,qEAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBAC/C,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;QACL,CAAC,CACF,CAAC;IACJ,CAAC;IAED,QAAQ,CAAC,GAAQ,EAAE,IAAS;QAC1B,IAAI,IAAI,GAAG;YACT,oBAAoB,EAAE,IAAI,CAAC,oBAAoB;YAC/C,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,OAAO,EAAE,GAAG;YACZ,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,SAAS,EAAE,IAAI,CAAC,SAAS;YAEzB,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,OAAO,EAAE,EAAE;SACZ,CAAC;QAEF,MAAM,QAAQ,GAAG,mEAAU,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAErD,+DAAM,CAAC,QAAQ,EAAE,IAAI,CAAC;aACnB,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACZ,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAE1C,MAAM,kBAAkB,GAAG,4DAAG,CAC5B,IAAI,CAAC,SAAS,EACd,UAAU,EACV,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CACpB,CAAC;YAEF,IAAI,QAAQ,GAAG;gBACb,IAAI,EAAE,OAAO;aACd,CAAC;YACF,kEAAS,CAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBACnD,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;gBAEtC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,cAAc,GAAG,GAAG,CAAC,CAAC,CAAC;YAC/C,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;YACb,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IACP,CAAC;;4EAhJU,cAAc;4GAAd,cAAc;;QC1B3B,6EAAY;QAGN,6EAAmC;QACrC,4DAAc;QACd,4EAAW;QAAA,2EAAgB;QAAA,4DAAY;QAI3C,8EAAa;QAET,oEAA0B;QAC5B,4DAAM;QACN,yEAA2C;QAEU,sEAAU;QAAA,4DAAY;QACvE,gFAKC;QAJC,0LAAuB;QAIxB,4DAAY;QAGf,+EAAuB;QAC4B,mEAAO;QAAA,4DAAY;QACpE,gFAKC;QAJC,8LAA2B;QAI5B,4DAAY;QAGf,+EAAuB;QAC4B,yEAAa;QAAA,4DAAY;QAC1E,gFAKC;QAJC,8LAA2B;QAI5B,4DAAY;QAEf,+EAAuB;QAC4B,iEAAK;QAAA,4DAAY;QAClE,gFAKC;QAJC,sLAAmB;QAIpB,4DAAY;QAGf,+EAAuB;QAElB,iFAAqB;QAAA,4DACvB;QACD,gFAKC;QAJC,qMAAkC;QAInC,4DAAY;QAEf,+EAAuB;QACQ,wFAA4B;QAAA,4DAAY;QACrE,iFAME;QAFA,8IAAU,sBAAkB,IAAC;QAJ/B,4DAME;QACF,kFAAqC;QAAzB,wRAAS,qEAAc,KAAC;QAAC,uEAAW;QAAA,4DAAa;QAG/D,iEAAM;QAMN,gFAAuB;QACrB,+EAA0C;QAC1C,iFAAwB;QAAA,+FAAmC;QAAA,4DAAY;QAGzE,sEAA8B;QAC9B,8EAAqD;QAA7B,6IAAS,sBAAkB,IAAC;QAClD,iFACF;QAAA,4DAAS;;QAzEL,2DAAuB;QAAvB,kFAAuB;QAUvB,0DAA2B;QAA3B,sFAA2B;QAU3B,0DAA2B;QAA3B,sFAA2B;QAS3B,0DAAmB;QAAnB,8EAAmB;QAYnB,0DAAkC;QAAlC,6FAAkC","sources":["./src/app/salon/salonregis/salonregis-routing.module.ts","./src/app/salon/salonregis/salonregis.module.ts","./src/app/salon/salonregis/salonregis.page.ts","./src/app/salon/salonregis/salonregis.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SalonregisPage } from './salonregis.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SalonregisPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SalonregisPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SalonregisPageRoutingModule } from './salonregis-routing.module';\r\n\r\nimport { SalonregisPage } from './salonregis.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SalonregisPageRoutingModule,\r\n  ],\r\n  declarations: [SalonregisPage],\r\n})\r\nexport class SalonregisPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  doc,\r\n  Firestore,\r\n  getDocs,\r\n  query,\r\n  updateDoc,\r\n  where,\r\n} from '@angular/fire/firestore';\r\nimport {\r\n  getDownloadURL,\r\n  ref,\r\n  Storage,\r\n  uploadBytesResumable,\r\n} from '@angular/fire/storage';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { getDoc } from 'firebase/firestore';\r\n\r\n@Component({\r\n  selector: 'app-salonregis',\r\n  templateUrl: './salonregis.page.html',\r\n  styleUrls: ['./salonregis.page.scss'],\r\n})\r\nexport class SalonregisPage implements OnInit {\r\n  public contactNumber: string = '';\r\n  public email: string = '';\r\n  public logoUrl: string = '';\r\n  public salonLocation: string = '';\r\n  public salonName: string = '';\r\n  public businessRegistration: string = '';\r\n\r\n  file!: File;\r\n  fileRestriction: Array<any> = ['image/jpeg', 'image/png'];\r\n  isFileValid: boolean = true;\r\n\r\n  uid: any;\r\n\r\n  userData: Array<any> = [];\r\n\r\n  constructor(\r\n    private firestore: Firestore,\r\n    private storage: Storage,\r\n    private toast: ToastController,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute\r\n  ) {\r\n    this.uid = this.activatedRoute.snapshot.params['id'];\r\n    console.log(this.uid);\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.uid) {\r\n      this.getUserData();\r\n    }\r\n  }\r\n\r\n  getUserData() {\r\n    const usersDb = collection(this.firestore, 'customer');\r\n    const customerSingle = query(usersDb, where('uid', '==', this.uid));\r\n\r\n    getDocs(customerSingle).then((res) => {\r\n      this.userData = [\r\n        ...res.docs.map((doc: any) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        }),\r\n      ];\r\n\r\n      this.email = this.userData[0].email;\r\n      console.log(this.userData);\r\n    });\r\n  }\r\n  fileChange(event: any) {\r\n    console.log(event.target.files[0]);\r\n    if (this.fileRestriction.includes(event.target.files[0].type)) {\r\n      this.file = event.target.files[0];\r\n      this.isFileValid = true;\r\n      this.presentToast('Logo added');\r\n    } else {\r\n      this.presentToast('Please put a valid logo ');\r\n      this.file = null;\r\n      this.isFileValid = false;\r\n    }\r\n  }\r\n  async presentToast(message: string) {\r\n    const toast = await this.toast.create({\r\n      message: message,\r\n      duration: 2000,\r\n    });\r\n\r\n    toast.present();\r\n  }\r\n\r\n  uploadFile(event: any) {\r\n    if (\r\n      this.contactNumber == '' &&\r\n      this.businessRegistration == '' &&\r\n      this.email == '' &&\r\n      this.salonName == '' &&\r\n      this.email == ''\r\n    ) {\r\n      this.presentToast('Please fill up the fields ');\r\n      return;\r\n    }\r\n    const storageRef = ref(this.storage, `images/${this.file.name}`);\r\n    const upload = uploadBytesResumable(storageRef, this.file);\r\n\r\n    upload.on(\r\n      'state_changed',\r\n      (snapshot) => {\r\n        const progress =\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        console.log(progress);\r\n\r\n        if (progress === 100) {\r\n          setTimeout(() => {\r\n            getDownloadURL(upload.snapshot.ref).then((url) => {\r\n              this.addSalon(url, upload.snapshot.metadata);\r\n            });\r\n          }, 2000);\r\n        }\r\n      },\r\n      () => {\r\n        getDownloadURL(upload.snapshot.ref).then((url) => {\r\n          console.log('dlurl', url);\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  addSalon(url: any, meta: any): void {\r\n    let data = {\r\n      businessRegistration: this.businessRegistration,\r\n      contactNumber: this.contactNumber,\r\n      email: this.email,\r\n      logoUrl: url,\r\n      salonLocation: this.salonLocation,\r\n      salonName: this.salonName,\r\n\r\n      uid: this.uid,\r\n      ratings: [],\r\n    };\r\n\r\n    const addSalon = collection(this.firestore, 'salon');\r\n\r\n    addDoc(addSalon, data)\r\n      .then((res) => {\r\n        const key = res['_key'].path.segments[1];\r\n        console.log(res['_key'].path.segments[1]);\r\n\r\n        const updateCustomerType = doc(\r\n          this.firestore,\r\n          'customer',\r\n          this.userData[0].id\r\n        );\r\n\r\n        let typeData = {\r\n          type: 'salon',\r\n        };\r\n        updateDoc(updateCustomerType, typeData).then((res) => {\r\n          this.presentToast('Salon Registered');\r\n\r\n          this.router.navigate(['/saloninter/' + key]);\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Sign up as Salon</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<!-- Application Form -->\r\n<ion-content>\r\n  <div>\r\n    <img src=\"assets/3.png\" />\r\n  </div>\r\n  <div class=\"salon-register-content-center\">\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\">Salon Name</ion-label>\r\n      <ion-input\r\n        [(ngModel)]=\"salonName\"\r\n        name=\"salonName\"\r\n        type=\"text\"\r\n        placeholder=\" \"\r\n      ></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\">Address</ion-label>\r\n      <ion-input\r\n        [(ngModel)]=\"salonLocation\"\r\n        name=\"salonLocation\"\r\n        type=\"text\"\r\n        placeholder=\" \"\r\n      ></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\">Mobile Number</ion-label>\r\n      <ion-input\r\n        [(ngModel)]=\"contactNumber\"\r\n        name=\"contactNumber\"\r\n        type=\"number\"\r\n        placeholder=\"\"\r\n      ></ion-input>\r\n    </ion-item>\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\">Email</ion-label>\r\n      <ion-input\r\n        [(ngModel)]=\"email\"\r\n        name=\"email\"\r\n        type=\"email\"\r\n        placeholder=\"\"\r\n      ></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\" position=\"floating\"\r\n        >Business Registration</ion-label\r\n      >\r\n      <ion-input\r\n        [(ngModel)]=\"businessRegistration\"\r\n        name=\"businessRegistration\"\r\n        type=\"text\"\r\n        placeholder=\"\"\r\n      ></ion-input>\r\n    </ion-item>\r\n    <ion-item class=\"item\">\r\n      <ion-label class=\"text-stl2\">Salon Logo (1 x 1 size only)</ion-label>\r\n      <input\r\n        #upload\r\n        type=\"file\"\r\n        placeholder=\"\"\r\n        (change)=\"fileChange($event)\"\r\n        hidden\r\n      />\r\n      <ion-button (click)=\"upload.click()\">Upload Logo</ion-button>\r\n    </ion-item>\r\n\r\n    <br /><br />\r\n\r\n    <!-- <div float-right class=\"my-checkbox\">\r\n      <ion-checkbox name=\"check\"></ion-checkbox>\r\n      <ion-label class=\"text\">I agree in all terms and conditions</ion-label>\r\n    </div> -->\r\n    <ion-item lines=\"none\">\r\n      <ion-checkbox name=\"check\"></ion-checkbox>\r\n      <ion-label class=\"text\">I agree in all terms and conditions</ion-label>\r\n    </ion-item>\r\n\r\n    <div class=\"spacer-h-s\"></div>\r\n    <button  class=\"submit\" (click)=\"uploadFile($event)\">\r\n      Start Your Journey!\r\n    </button>\r\n  </div>\r\n</ion-content>\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}