{"version":3,"file":"src_app_user-appointment_user-appointment_module_ts.js","mappings":"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","sources":["./src/app/user-appointment/user-appointment-routing.module.ts","./src/app/user-appointment/user-appointment.module.ts","./src/app/user-appointment/user-appointment.page.ts","./src/app/user-appointment/user-appointment.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UserAppointmentPage } from './user-appointment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserAppointmentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UserAppointmentPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UserAppointmentPageRoutingModule } from './user-appointment-routing.module';\n\nimport { UserAppointmentPage } from './user-appointment.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UserAppointmentPageRoutingModule\n  ],\n  declarations: [UserAppointmentPage]\n})\nexport class UserAppointmentPageModule {}\n","import { Component, OnInit } from '@angular/core';\r\nimport { addDoc, collection, Firestore, getDocs, query, where } from '@angular/fire/firestore';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { FirestoreService } from '../services/firestore.service';\r\n\r\n@Component({\r\n  selector: 'app-user-appointment',\r\n  templateUrl:'./user-appointment.page.html',\r\n  styleUrls: ['./user-appointment.page.scss'],\r\n})\r\nexport class UserAppointmentPage implements OnInit {\r\n  public name: string = '';\r\n  public email: string = '';\r\n  public services: string = ''; //bind to ion selection or ion select as [(ngModel)]=\"services\"\r\n  public stylist: string ='';//bind to ion select\r\n  public time: string = ''; //same with top\r\n  public date: string = ''; //same with top\r\n  public cost: string = ''; //same with top\r\n\r\n  public salonId: string = '';\r\n\r\n  public servicesList: Array<any> = [\"footspa\", \"rebond\"];\r\n  salonServiceParams: any;\r\n\r\n  public stylistList: Array<any> = [];\r\n  salonstylistParams: any;\r\n\r\n  userId: any = localStorage.getItem('user') || null;\r\n  public userData: Array<any> = [];\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private firestore: Firestore,\r\n    private toast: ToastController,\r\n    private router: Router,\r\n    private firestoreService: FirestoreService\r\n  ) {\r\n    //salon ID from URL params\r\n    this.salonId = this.activatedRoute.snapshot.params['id'];\r\n    this.salonServiceParams = this.activatedRoute.snapshot.params['service'];\r\n\r\n    console.log(this.salonServiceParams);\r\n    this.services = this.salonServiceParams;\r\n\r\n    // getting stylist\r\n    this.salonId = this.activatedRoute.snapshot.params['id'];\r\n    this.salonstylistParams = this.activatedRoute.snapshot.params['stylist'];\r\n\r\n    console.log(this.salonstylistParams);\r\n    this.services = this.salonstylistParams;\r\n\r\n    //getting services\r\n\r\n    this.getServices(this.salonId);\r\n    this.getStylists(this.salonId);\r\n    this.getUserData();\r\n  }\r\n\r\n  getUserData() {\r\n    if (this.userId) {\r\n      const userData = collection(this.firestore, 'customer');\r\n\r\n      const userQuery = query(userData, where('uid', '==', this.userId));\r\n\r\n      getDocs(userQuery).then((res) => {\r\n        this.userData = [\r\n          ...res.docs.map((doc: any) => {\r\n            this.email = doc.data()['email'];\r\n            this.name = doc.data()['firstName'] + \" \" + doc.data()['lastName'];\r\n            return { ...doc.data(), id: doc.id };\r\n          }),\r\n        ];\r\n\r\n        console.log(this.userData);\r\n      });\r\n    } else {\r\n      console.log('Please Login');\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.name = '',\r\n    this.email ='',\r\n    this.services = '';\r\n    this.stylist='';\r\n    this.time = '';\r\n    this.date = '';\r\n    this.cost = '';\r\n  }\r\n\r\n  async presentToast(message: string) {\r\n    const toast = await this.toast.create({\r\n      message: message,\r\n      duration: 2000,\r\n    });\r\n\r\n    toast.present();\r\n  }\r\n  ngOnInit() {}\r\n\r\n  async getServices(id: any) {\r\n    // get all services by salon ID\r\n    // this.firestoreService.getServicesBySalonId(id).subscribe((res) => {\r\n    //   console.log(`Services List: ${res}`);\r\n    //   // bind this to a selection form or a dropdown\r\n\r\n    //   this.servicesList = res;\r\n    // });\r\n    const services = await this.firestoreService.getServicesBySalonId(id);\r\n    this.servicesList = services.map(value => `${value['subCategory']} (P${value['cost']})`);\r\n  }\r\n\r\n  async getStylists(id: string) {\r\n    this.stylistList = await this.firestoreService.getstylistBySalonId(id);\r\n  }\r\n\r\n  addAppointment() {\r\n    // for validation\r\n    if (\r\n      this.name == '' ||\r\n      this.email == '' ||\r\n      this.services == '' ||\r\n      this.stylist == '' ||\r\n      this.time == '' ||\r\n      // this.cost == '' ||\r\n      this.date == ''\r\n    ) {\r\n      this.presentToast('Please fill up all the fields');\r\n\r\n      return;\r\n    }\r\n\r\n    // for actual data coming from user input\r\n    let data = {\r\n      name: this.name,\r\n      email: this.email,\r\n      date: this.date,\r\n      stylist: this.stylist,\r\n      salonId: this.salonId,\r\n      service: this.services,\r\n      time: this.time,\r\n      cost: this.cost,\r\n    };\r\n\r\n    // for testing\r\n    // let data = {\r\n    // date: new Date().toLocaleDateString(),\r\n    //   name: 'Test Customer',\r\n    //   salonId: this.salonId,\r\n    //   service: 'Haircut (Trim)',\r\n    //   time: new Date().toLocaleTimeString(),\r\n    //   cost: '50',\r\n    // };\r\n    const addAppointment = collection(this.firestore, 'Appointment');\r\n\r\n    addDoc(addAppointment, data)\r\n      .then((res) => {\r\n        console.log(res);\r\n        this.presentToast('Appointment added successfully ');\r\n\r\n        // this.router.navigate(['/'])   use this to navigate on something\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        this.presentToast('Customer successfully registered');\r\n      });\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button></ion-back-button>\r\n      </ion-buttons>\r\n    <ion-title>Appointment Information</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <ion-card class=\"container\">\r\n    <form>\r\n      <ion-input\r\n      name=\"name\"\r\n      [(ngModel)]=\"name\"\r\n      class=\"name\"\r\n      type=\"name\"\r\n      placeholder=\"Name\"\r\n      >Name</ion-input>\r\n      <ion-input\r\n      name=\"email\"\r\n      [(ngModel)]=\"email\"\r\n      class=\"email\"\r\n      type=\"email\"\r\n      placeholder=\"Email\"\r\n      >email</ion-input>\r\n      <ion-select\r\n        name=\"services\"\r\n        [(ngModel)]=\"services\"\r\n        placeholder=\"Select Services\"\r\n        [value]=\"salonServiceParams\"\r\n        class=\"select-option-text\"\r\n      >\r\n        <ion-select-option\r\n          *ngFor=\"let services of servicesList\"\r\n          value=\"{{services}}\"\r\n        >\r\n          {{services}}</ion-select-option\r\n        >\r\n      </ion-select>\r\n      <ion-select\r\n        name=\"stylist\"\r\n        [(ngModel)]=\"stylist\"\r\n        placeholder=\"Select stylist\"\r\n        [value]=\"salonstylistParams\"\r\n        class=\"select-option-text\"\r\n      >\r\n        <ion-select-option\r\n        *ngFor=\"let stylist of stylistList\"\r\n        value=\"{{stylist}} \"\r\n        >\r\n        {{stylist}}</ion-select-option\r\n        >\r\n      </ion-select>\r\n      <ion-input\r\n        name=\"date\"\r\n        [(ngModel)]=\"date\"\r\n        class=\"customer-info5\"\r\n        type=\"date\"\r\n        placeholder=\"Date\"\r\n        >Date</ion-input\r\n      >\r\n      <ion-input\r\n        name=\"time\"\r\n        [(ngModel)]=\"time\"\r\n        class=\"customer-info6\"\r\n        type=\"time\"\r\n        placeholder=\"Time\"\r\n        >Time\r\n      </ion-input>\r\n    </form>\r\n    <!-- For Looping, bind to a component -->\r\n    <!-- *ngFor=\"let services of servicesLists\" -->\r\n\r\n    <!-- getting the value -->\r\n    <!-- {{services?.category}} -->\r\n    <!-- {{services?.subCategory}} -->\r\n    <!-- {{services?.cost}} -->\r\n\r\n    <button class=\"add-app\" (click)=\"addAppointment()\">Add Appointment</button>\r\n\r\n    \r\n  </ion-card>\r\n</ion-content>\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}